# نظام التعرف على الوجوه

![Python](https://img.shields.io/badge/Python-3.8+-3776AB.svg?style=flat-square&logo=python)
![Firebase](https://img.shields.io/badge/Firebase-FFCA28.svg?style=flat-square&logo=firebase)
![OpenCV](https://img.shields.io/badge/OpenCV-5C3EE8.svg?style=flat-square&logo=opencv)
![الترخيص](https://img.shields.io/badge/الترخيص-MIT-4CAF50.svg?style=flat-square)

<p align="center">
  <strong>حل متقدم للتعرف على الوجوه لتسجيل الحضور الآلي والتحقق من الهوية في قطاعات متعددة.</strong>
</p>

---

## نظرة عامة

**نظام التعرف على الوجوه** هو تطبيق متطور يعتمد على رؤية الحاسوب، مصمم لأتمتة التحقق من الهوية وتسجيل الحضور، مع تطبيقات في التعليم، إنفاذ القانون، الرعاية الصحية، والعلوم الجنائية. تم تطوير هذا النظام كمشروع تخرج في قسم هندسة الحاسوب بجامعة دوزجة، ويستفيد من تقنيات التعرف على الوجوه في الوقت الفعلي لتعزيز الكفاءة، الدقة، والأمان. يركز النموذج الأولي المنفذ على نظام تسجيل حضور آلي للمؤسسات التعليمية، باستخدام كاميرا ويب لتحديد هوية الطلاب، تسجيل حضورهم، وتخزين البيانات في قاعدة بيانات Firebase في الوقت الفعلي. يدعم التصميم المعياري للنظام التوسع ليشمل تطبيقات حيوية مثل كشف المجرمين، تحديد هوية المرضى، والتحليل الجنائي.

يجمع النظام بين واجهة مستخدم رسومية سهلة الاستخدام، خوارزميات تعرف على الوجوه القوية، وإدارة بيانات سحابية لتوفير حل قابل للتوسع للتحديات المتعلقة بالهوية.

---

## الميزات

### التطبيق الرئيسي
- **التعرف على الوجوه في الوقت الفعلي**:
  - يكتشف ويحدد الوجوه على الفور باستخدام مكتبة `face_recognition` وdlib.
  - يقارن ترميزات الوجوه الحية مع ترميزات مخزنة مسبقًا لتحديد هوية دقيق.
- **واجهة المستخدم الرسومية**:
  - تعرض بث فيديو الكاميرا مع إطارات حول الوجوه المعترف بها.
  - تعرض مؤشرات الحالة (نشط، مسجل، مسجل مسبقًا، عدم التطابق) باستخدام صور ديناميكية.
  - تعرض تفاصيل الطالب (مثل الاسم، الرقم التعريفي، التخصص، عدد مرات الحضور) عند التعرف.
- **تسجيل الحضور الآلي**:
  - يسجل الحضور للطلاب المعترف بهم، مع منع التكرار خلال 30 ثانية.
  - يحدث قاعدة بيانات Firebase بأعداد الحضور والطوابع الزمنية.
- **معالجة فعالة**:
  - يعيد تحجيم إطارات الفيديو لتسريع عملية التعرف.
  - يستخدم ترميزات مخزنة مسبقًا لتسريع المطابقة.

### مولد الترميزات
- **ترميز الوجوه**:
  - يعالج صور الطلاب لإنشاء ترميزات وجوه فريدة.
  - يحفظ الترميزات والمعرفات في ملف `EncodeFile.p` لاستخدامها في التطبيق الرئيسي.
- **المعالجة الدفعية**: يتعامل مع صور متعددة في مجلد `Images`.

### التكامل مع Firebase
- **ملفات الطلاب**:
  - يخزن البيانات (مثل الاسم، رقم الهوية الوطنية، الجنسية، الحضور) في قاعدة بيانات Firebase في الوقت الفعلي.
  - يدعم التحديثات والاسترجاع الديناميكي.
- **إدارة الحضور**:
  - يزيد قيمة `total_attendance` ويحدث `last_attendance_time` للطلاب المعترف بهم.
- **التخزين السحابي**:
  - يرفع صور الطلاب إلى Firebase Storage (منفذ في مولد الترميزات).

### التنوع
- مصمم لتطبيقات أوسع في إنفاذ القانون (كشف المجرمين)، الرعاية الصحية (تحديد هوية المرضى)، والعلوم الجنائية (التحقق من الهوية).
- قابل للتوسع لمستخدمين وسيناريوهات جديدة من خلال تحديث الصور وقاعدة البيانات.

---

## الهيكلية

يتكامل النظام من عدة مكونات:
- **التطبيق الرئيسي (`main.py`)**: يلتقط الفيديو، ينفذ التعرف على الوجوه، ويحدث الواجهة الرسومية وFirebase.
- **مولد الترميزات (`encode_generator.py`)**: يجهز ترميزات الوجوه من صور الطلاب.
- **نصوص تهيئة Firebase (`add_data_to_firebase_*.py`)**: تملأ ملفات الطلاب في Firebase.
- **قاعدة بيانات Firebase في الوقت الفعلي**:
  - الهيكلية: `Students/{student_id}` تحتوي على حقول مثل `name`، `T.C`، `nationality`، `total_attendance`، `last_attendance_time`.
- **الموارد**:
  - `Resources/background.png`: خلفية الواجهة الرسومية.
  - `Resources/Modes/*.png`: صور الحالة (مثل نشط، مسجل).
  - `Images/*.png`: صور الطلاب للترميز.
  - `EncodeFile.p`: ترميزات الوجوه والمعرفات.
  - `serviceAccountKey.json`: بيانات اعتماد Firebase.

<p align="center">
  <img src="screenshots/architecture-diagram.png" alt="هيكلية النظام" width="600"/>
</p>

---

## المتطلبات الأساسية

### الأجهزة
- **كاميرا ويب**: لالتقاط الفيديو الحي (الدقة الدنيا: 640x480).

### البرمجيات
- **Python**: الإصدار 3.8 أو أعلى
- **التبعيات**:
  ```bash
  opencv-python face_recognition cvzone numpy pickle firebase_admin
